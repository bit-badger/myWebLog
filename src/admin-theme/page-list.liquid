<h2 class="my-3">{{ page_title }}</h2>
<article>
  <a href="{{ "admin/page/new/edit" | relative_link }}" class="btn btn-primary btn-sm mb-3">Create a New Page</a>
  {%- assign page_count = pages | size -%}
  {%- assign title_col = "col-12 col-md-5" -%}
  {%- assign link_col  = "col-12 col-md-5" -%}
  {%- assign upd8_col  = "col-12 col-md-2" -%}
  <form method="post" class="container" hx-target="body">
    <input type="hidden" name="{{ csrf.form_field_name }}" value="{{ csrf.request_token }}">
    <div class="row mwl-table-heading">
      <div class="{{ title_col }}">
        <span class="d-none d-md-inline">Title</span><span class="d-md-none">Page</span>
      </div>
      <div class="{{ link_col }} d-none d-md-inline-block">Permalink</div>
      <div class="{{ upd8_col }} d-none d-md-inline-block">Updated</div>
    </div>
    {% if page_count > 0 %}
      {% for pg in pages -%}
        <div class="row mwl-table-detail">
          <div class="{{ title_col }}">
            {{ pg.title }}
            {%- if pg.is_default %} &nbsp; <span class="badge bg-success">HOME PAGE</span>{% endif -%}
            {%- if pg.show_in_page_list %} &nbsp; <span class="badge bg-primary">IN PAGE LIST</span> {% endif -%}<br>
            <small>
              {%- capture pg_link %}{% unless pg.is_default %}{{ pg.permalink }}{% endunless %}{% endcapture -%}
              <a href="{{ pg_link | relative_link }}" target="_blank">View Page</a>
              {% if is_editor or is_author and user_id == pg.author_id %}
                <span class="text-muted"> &bull; </span>
                <a href="{{ pg | edit_page_link }}">Edit</a>
              {% endif %}
              {% if is_web_log_admin %}
                <span class="text-muted"> &bull; </span>
                {%- assign pg_del_link = "admin/page/" | append: pg.id | append: "/delete" | relative_link -%}
                <a href="{{ pg_del_link }}" hx-post="{{ pg_del_link }}" class="text-danger"
                   hx-confirm="Are you sure you want to delete the page &ldquo;{{ pg.title | strip_html | escape }}&rdquo;? This action cannot be undone.">
                  Delete
                </a>
              {% endif %}
            </small>
          </div>
          <div class="{{ link_col }}">
            {%- capture pg_link %}/{% unless pg.is_default %}{{ pg.permalink }}{% endunless %}{% endcapture -%}
            <small class="d-md-none">{{ pg_link }}</small><span class="d-none d-md-inline">{{ pg_link }}</span>
          </div>
          <div class="{{ upd8_col }}">
            <small class="d-md-none text-muted">Updated {{ pg.updated_on | date: "MMMM d, yyyy" }}</small>
            <span class="d-none d-md-inline">{{ pg.updated_on | date: "MMMM d, yyyy" }}</span>
          </div>
        </div>
      {%- endfor %}
    {% else %}
      <div class="row">
        <div class="col text-muted fst-italic text-center">This web log has no pages</div>
      </div>
    {% endif %}
  </form>
  {% if page_nbr > 1 or page_count == 25 %}
    <div class="d-flex justify-content-evenly pb-3">
      <div>
        {% if page_nbr > 1 %}
          <p>
            <a class="btn btn-default" href="{{ "admin/pages" | append: prev_page | relative_link }}">
              &laquo; Previous
            </a>
          </p>
        {% endif %}
      </div>
      <div class="text-right">
        {% if page_count == 25 %}
          <p>
            <a class="btn btn-default" href="{{ "admin/pages" | append: next_page | relative_link }}">Next &raquo;</a>
          </p>
        {% endif %}
      </div>
    </div>
  {% endif %}
</article>
